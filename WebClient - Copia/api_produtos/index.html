<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gestão de Produtos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <header class="app-header">
    <h1>Produtos</h1>
  </header>

  <main class="container">
    <section class="panel">
      <h2>Novo Produto</h2>
      <form id="create-form" autocomplete="off">
        <div class="form-row">
          <label for="cf_PRO_COD_BARRA">Código de Barra</label>
          <input id="cf_PRO_COD_BARRA" name="PRO_COD_BARRA" required />
        </div>
        <div class="form-row">
          <label for="cf_PRO_NOME">Nome</label>
            <input id="cf_PRO_NOME" name="PRO_NOME" required />
        </div>
        <div class="form-row">
          <label for="cf_PRO_ESTOQ1">Estoque</label>
          <input id="cf_PRO_ESTOQ1" name="PRO_ESTOQ1" type="number" step="0.01" required />
        </div>
        <div class="form-row">
          <label for="cf_PRO_PRECO1">Preço 1</label>
          <input id="cf_PRO_PRECO1" name="PRO_PRECO1" type="number" step="0.01" required />
        </div>
        <div class="form-row">
          <label for="cf_PRO_PRECO2">Preço 2</label>
          <input id="cf_PRO_PRECO2" name="PRO_PRECO2" type="number" step="0.01" required />
        </div>
        <div class="form-row">
          <label for="cf_PRO_VALIDADE">Validade</label>
          <!-- Agora tipo date (ISO) -->
          <input id="cf_PRO_VALIDADE" name="PRO_VALIDADE" type="date" required />
        </div>
        <div class="form-row">
          <label for="cf_UND_NOME">Unidade</label>
          <input id="cf_UND_NOME" name="UND_NOME" required />
        </div>
        <div class="form-row">
          <label for="cf_GP_DESCRI">Grupo</label>
          <input id="cf_GP_DESCRI" name="GP_DESCRI" />
        </div>
        <div class="form-row">
          <label for="cf_MAR_DESCRI">Marca</label>
          <input id="cf_MAR_DESCRI" name="MAR_DESCRI" />
        </div>
        <div class="form-actions">
          <button type="submit">Salvar</button>
          <button type="reset" class="secondary">Limpar</button>
        </div>
      </form>
    </section>

    <section class="panel">
      <div class="list-header">
        <h2>Lista de Produtos</h2>
        <div class="tools">
          <div class="search-box">
            <input id="search" type="text" placeholder="Buscar (código, nome, grupo...)" autocomplete="off" />
            <button id="clear-search" class="secondary small" title="Limpar busca">×</button>
          </div>
          <button id="reload-btn" title="Recarregar dados">Recarregar</button>
        </div>
      </div>

      <div id="feedback" class="feedback" aria-live="polite"></div>

      <div class="table-wrapper">
        <table id="product-table">
          <thead>
            <tr>
              <th>Código</th>
              <th>Cód. Barra</th>
              <th>Nome</th>
              <th>Estoque</th>
              <th>Preço 1</th>
              <th>Preço 2</th>
              <th>Validade</th>
              <th>Unid</th>
              <th>Grupo</th>
              <th>Marca</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="product-tbody">
            <!-- linhas via JS -->
          </tbody>
        </table>
      </div>

      <nav class="pagination" id="pagination"></nav>
    </section>
  </main>

  <!-- Modal Edição -->
  <dialog id="edit-modal">
    <form method="dialog" id="edit-form">
      <h3>Editar Produto</h3>
      <input type="hidden" id="edit_PRO_CODIGO" name="PRO_CODIGO" />
      <div class="form-row">
        <label for="edit_PRO_ESTOQ1">Estoque</label>
        <input id="edit_PRO_ESTOQ1" name="PRO_ESTOQ1" type="number" step="0.01" required />
      </div>
      <div class="form-row">
        <label for="edit_PRO_PRECO1">Preço 1</label>
        <input id="edit_PRO_PRECO1" name="PRO_PRECO1" type="number" step="0.01" required />
      </div>
      <div class="form-row">
        <label for="edit_PRO_PRECO2">Preço 2</label>
        <input id="edit_PRO_PRECO2" name="PRO_PRECO2" type="number" step="0.01" required />
      </div>
      <div class="form-row">
        <label for="edit_PRO_VALIDADE">Validade</label>
        <!-- tipo date -->
        <input id="edit_PRO_VALIDADE" name="PRO_VALIDADE" type="date" required />
      </div>
      <div class="form-actions">
        <button type="submit">Atualizar</button>
        <button type="button" class="secondary"  id="cancel-edit">Cancelar</button>
      </div>
      <p class="note">Apenas os campos acima serão atualizados (PUT parcial).</p>
    </form>
  </dialog>

  <template id="row-template">
    <tr>
      <td data-col="PRO_CODIGO"></td>
      <td data-col="PRO_COD_BARRA"></td>
      <td data-col="PRO_NOME"></td>
      <td data-col="PRO_ESTOQ1"></td>
      <td data-col="PRO_PRECO1"></td>
      <td data-col="PRO_PRECO2"></td>
      <td data-col="PRO_VALIDADE"></td>
      <td data-col="UND_NOME"></td>
      <td data-col="GP_DESCRI"></td>
      <td data-col="MAR_DESCRI"></td>
      <td class="actions">
        <button data-action="edit" class="small">Editar</button>
        <button data-action="delete" class="small danger">Excluir</button>
      </td>
    </tr>
  </template>

  <script type="module" src="./js/main.js"></script>
</body>
</html>