<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>GestÃ£o de Validades</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/png" href="./img/icon-s.png" />
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <header class="mobile-header" id="mobile-header">
    <div style="display:flex; align-items:center; padding: 0 0.6rem; width: 100%;">
      <button id="open-drawer" class="icon-btn hdr-btn only-mobile" aria-label="Filtros" title="Filtros">
        <img src="./img/icon-s.png" alt="Abrir menu" style="width: 28px; height: 28px; display: block;" />
      </button>
      <div style="flex:1;"></div>
      <button id="order-by-btn-mobile" class="icon-btn only-mobile" aria-label="Ordenar (clique para prÃ³ximo; Shift+click inverte direÃ§Ã£o)" title="Ordenar (clique para prÃ³ximo; Shift+click inverte direÃ§Ã£o)" style="margin-right:8px;">â‡…</button>
      <button id="logout-btn-mobile" class="icon-btn hdr-btn only-mobile" style="background:var(--c-panel-alt); color:var(--c-accent); border:1px solid var(--c-accent); font-weight:600; font-size:1.05rem; border-radius:8px; padding:0.45rem 1.1rem; cursor:pointer; margin-left:auto;" onclick="window.location.href='login.html'">
        Sair
      </button>
    </div>
  </header>
  <!-- Drawer / Menu Lateral de Filtros -->
  <aside id="filter-drawer" class="filter-drawer" aria-hidden="true">
    <div class="drawer-header">
      <h2>Filtros & PreferÃªncias</h2>
      <button id="close-drawer" type="button" aria-label="Fechar filtros">Ã—</button>
    </div>
    <div class="drawer-content" role="form">
      <div class="drawer-group">
        <label for="status-filter">Status</label>
        <select id="status-filter">
          <option value="">Todos</option>
          <option value="OK">OK</option>
          <option value="ALERTA">PrÃ³ximo de vencer</option>
          <option value="VENCIDO">Vencidos</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="filter-grupo">Grupo</label>
        <select id="filter-grupo">
          <option value="">Todos</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="filter-marca">Marca</label>
        <select id="filter-marca">
          <option value="">Todas</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="group-by">Agrupar por</label>
        <select id="group-by">
          <option value="">Nenhum</option>
          <option value="GP_DESCRI">Grupo</option>
          <option value="MAR_DESCRI">Marca</option>
        </select>
      </div>
       
      <!-- CONTROLE DE TAMANHO DE FONTE -->
      <div class="drawer-group">
        <label for="custom-date-start">Validade de</label>
        <input type="date" id="custom-date-start" />
        <label for="custom-date-end">atÃ©</label>
        <input type="date" id="custom-date-end" />
      </div>
      <div class="drawer-legend">
        <span class="badge status-ok">OK</span>
        <span class="badge status-alerta">PrÃ³x. vencer</span>
        <span class="badge status-vencido">Vencido</span>
      </div>
      <div class="drawer-group">
        <label for="days-threshold">Dias para alerta (prÃ³x. vencer)</label>
        <input type="number" id="days-threshold" min="1" max="365" value="15" />
        <small style="display:block; margin-top:6px; color:var(--c-muted);">Defina em quantos dias um produto entra em alerta antes da validade.</small>
      </div>
      
      <div class="drawer-group">
        <div style="display: flex; align-items: center; gap: 16px;">
          <label for="estoque-positivo" style="margin-right: 10px;">Positivo</label>
          <label class="switch">
            <input type="checkbox" id="estoque-positivo" />
            <span class="slider"></span>
          </label>
          <label for="tema" style="margin-right: 10px;">Tema</label>
          <button id="theme-toggle" type="button" class="icon-btn" aria-label="Alternar tema" title="Alternar tema">ðŸŒ™</button>
        </div>
        
      </div>
      <div class="drawer-group">
        <label for="progress-bar">Tamanho da fonte</label>
        <div id="progress-bar-container" style="width: 100%; background: #eee; border-radius: 8px; height: 24px; margin-top: 6px;">
          <div id="progress-bar" style="width: 50%; height: 100%; background: linear-gradient(90deg, #4caf50, #2196f3); border-radius: 8px; transition: width 0.3s;"></div>
        </div>
        <span id="progress-value" style="display: block; text-align: right; font-size: 0.95em; margin-top: 2px; color: #333;">2'0%</span>
      </div>
      
    </div>
  </aside>
  <div id="drawer-backdrop" class="drawer-backdrop" hidden></div>

  <!-- MOBILE CONTROLS: topo da tela (sÃ³ aparecem em smartphone) -->

  <!-- CabeÃ§alho fixo (topo em desktop/tablet, rodapÃ© em smartphone) -->
  <header class="app-header" id="main-header">
  <div style="display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; width: 100%; min-height: 48px;">
    <div style="justify-self: start;">
      <button id="open-drawer-desktop" class="icon-btn hdr-btn only-desktop" aria-label="Filtros" title="Filtros">
        <img src="./img/icon-s.png" alt="Abrir menu" style="width: 28px; height: 28px; display: block;" />
      </button>
    </div>
    <div style="justify-self: center;">
      <div class="search-box header-search" style="width: 100%; max-width: 780px; display: flex; justify-content: center;">
  <input id="search" type="search" placeholder="Buscar (cÃ³digo, nome, marca...)" autocomplete="off" aria-label="Buscar produtos" />
  <button id="btn-voice" type="button" class="icon-btn" aria-label="Busca por voz" title="Busca por voz">ðŸŽ¤</button>
        <button id="btn-camera" type="button" class="icon-btn" aria-label="Ler cÃ³digo de barras" title="Ler cÃ³digo de barras">ðŸ“·</button>
        <button id="clear-search" type="button" class="icon-btn" aria-label="Limpar busca" title="Limpar busca">Ã—</button>
      </div>
    </div>
    <div style="justify-self: end; display:flex; gap:8px; align-items:center;">
  <button id="order-by-btn" type="button" class="icon-btn only-desktop" aria-label="Ordenar (clique para prÃ³ximo; Shift+click inverte direÃ§Ã£o)" title="Ordenar (clique para prÃ³ximo; Shift+click inverte direÃ§Ã£o)">â‡…</button>
      <button id="logout-btn-desktop" class="icon-btn hdr-btn only-desktop" style="background:var(--c-panel-alt); color:var(--c-accent); border:1px solid var(--c-accent); font-weight:600; font-size:1.05rem; border-radius:8px; padding:0.45rem 1.1rem; cursor:pointer;" onclick="window.location.href='login.html'">
        Sair
      </button>
    </div>
  </div>
  </header>

  <main class="main-content">
    <div id="feedback" class="feedback sticky-feedback" aria-live="polite"></div>
    <div class="table-wrapper" id="table-wrapper">
      <table id="product-table">
        <thead>
          <tr>
            <th data-sort-field="PRO_CODIGO">CÃ³d.</th>
            <th data-sort-field="PRO_COD_BARRA">CÃ³d. Barra</th>
            <th data-sort-field="PRO_NOME">Nome</th>
            <th data-sort-field="UND_NOME">Unid</th>
            <th data-sort-field="PRO_ESTOQ1">Estoque</th>
            <th data-sort-field="PRO_PRECO1">PreÃ§o 1</th>
            <th data-sort-field="PRO_PRECO2">PreÃ§o 2</th>
            <th data-sort-field="PRO_VALIDADE">Validade</th>
            <th data-sort-field="_status">Status</th>
            <th data-sort-field="MAR_DESCRI">Marca</th>
            <th data-sort-field="GP_DESCRI">Grupo</th>
          </tr>
        </thead>
        <tbody id="product-tbody"></tbody>
      </table>
    </div>
    <div id="cards-container" class="cards-container" aria-live="polite"></div>
    <nav class="pagination" id="pagination" aria-label="PaginaÃ§Ã£o"></nav>
  </main>
  <div id="camera-overlay" class="camera-overlay" hidden>
    <div class="camera-box">
      <div class="camera-header">
        <h3>Leitor de CÃ³digo de Barras</h3>
        <button id="close-camera" type="button" aria-label="Fechar">Ã—</button>
      </div>
      <div class="camera-hint">Centralize o cÃ³digo dentro da Ã¡rea de vÃ­deo.</div>
      <video id="camera-video" playsinline></video>
      <div class="camera-status" id="camera-status">Iniciando cÃ¢mera...</div>
    </div>
  </div>
  <script type="module" src="./js/main.js"></script>
</body>
</html>