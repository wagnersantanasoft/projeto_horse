<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>GestÃ£o de Validades</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <!-- Drawer / Menu Lateral de Filtros -->
  <aside id="filter-drawer" class="filter-drawer" aria-hidden="true">
    <div class="drawer-header">
      <h2>Filtros & PreferÃªncias</h2>
      <button id="close-drawer" type="button" aria-label="Fechar filtros">Ã—</button>
    </div>
    <div class="drawer-content" role="form">
      <div class="drawer-group">
        <label for="status-filter">Status</label>
        <select id="status-filter">
          <option value="">Todos</option>
          <option value="OK">OK</option>
          <option value="ALERTA">PrÃ³ximo de vencer</option>
          <option value="VENCIDO">Vencidos</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="filter-grupo">Grupo</label>
        <select id="filter-grupo">
          <option value="">Todos</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="filter-marca">Marca</label>
        <select id="filter-marca">
          <option value="">Todas</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="group-by">Agrupar por</label>
        <select id="group-by">
          <option value="">Nenhum</option>
          <option value="GP_DESCRI">Grupo</option>
          <option value="MAR_DESCRI">Marca</option>
        </select>
      </div>
      <div class="drawer-legend">
        <span class="badge status-ok">OK</span>
        <span class="badge status-alerta">PrÃ³x. vencer</span>
        <span class="badge status-vencido">Vencido</span>
      </div>
      <button id="apply-filters" type="button" class="drawer-apply">Aplicar</button>
    </div>
  </aside>
  <div id="drawer-backdrop" class="drawer-backdrop" hidden></div>

  <!-- MOBILE CONTROLS: topo da tela (sÃ³ aparecem em smartphone) -->
  <div class="mobile-controls" id="mobile-controls">
    <button id="open-drawer" class="icon-btn hdr-btn" aria-label="Filtros" title="Filtros">â˜°</button>
    <input id="days-threshold" class="days-header-input" type="number" min="1" value="15" title="Dias para alerta de validade" aria-label="Dias para alerta de validade"/>
    <button id="reload-btn" type="button" class="icon-btn" title="Recarregar dados">âŸ³</button>
    <button id="theme-toggle" type="button" class="icon-btn" aria-label="Alternar tema" title="Alternar tema">ðŸŒ™</button>
  </div>

  <!-- CabeÃ§alho fixo (topo em desktop/tablet, rodapÃ© em smartphone) -->
  <header class="app-header" id="main-header">
    <div class="header-left">
      <button id="open-drawer-desktop" class="icon-btn hdr-btn" aria-label="Filtros" title="Filtros">â˜°</button>
      <div class="search-box header-search">
        <input id="search" type="search" placeholder="Buscar (cÃ³digo, nome, marca...)" autocomplete="off" aria-label="Buscar produtos" />
        <button id="btn-voice" type="button" class="icon-btn" aria-label="Busca por voz" title="Busca por voz">ðŸŽ¤</button>
        <button id="btn-camera" type="button" class="icon-btn" aria-label="Ler cÃ³digo de barras" title="Ler cÃ³digo de barras">ðŸ“·</button>
        <button id="clear-search" type="button" class="icon-btn" aria-label="Limpar busca" title="Limpar busca">Ã—</button>
      </div>
      <input id="days-threshold-desktop" class="days-header-input" type="number" min="1" value="15" title="Dias para alerta de validade" aria-label="Dias para alerta de validade"/>
    </div>
    <div class="header-right">
      <button id="theme-toggle-desktop" type="button" class="icon-btn" aria-label="Alternar tema" title="Alternar tema">ðŸŒ™</button>
      <button id="reload-btn-desktop" type="button" class="icon-btn" title="Recarregar dados">âŸ³</button>
    </div>
  </header>

  <main class="main-content">
    <div id="feedback" class="feedback sticky-feedback" aria-live="polite"></div>
    <div class="table-wrapper" id="table-wrapper">
      <table id="product-table">
        <thead>
          <tr>
            <th data-sort-field="PRO_CODIGO">CÃ³d.</th>
            <th data-sort-field="PRO_COD_BARRA">CÃ³d. Barra</th>
            <th data-sort-field="PRO_NOME">Nome</th>
            <th data-sort-field="UND_NOME">Unid</th>
            <th data-sort-field="PRO_ESTOQ1">Estoque</th>
            <th data-sort-field="PRO_PRECO1">PreÃ§o 1</th>
            <th data-sort-field="PRO_PRECO2">PreÃ§o 2</th>
            <th data-sort-field="PRO_VALIDADE">Validade</th>
            <th data-sort-field="_status">Status</th>
            <th data-sort-field="MAR_DESCRI">Marca</th>
            <th data-sort-field="GP_DESCRI">Grupo</th>
          </tr>
        </thead>
        <tbody id="product-tbody"></tbody>
      </table>
    </div>
    <div id="cards-container" class="cards-container" aria-live="polite"></div>
    <nav class="pagination" id="pagination" aria-label="PaginaÃ§Ã£o"></nav>
  </main>
  <div id="camera-overlay" class="camera-overlay" hidden>
    <div class="camera-box">
      <div class="camera-header">
        <h3>Leitor de CÃ³digo de Barras</h3>
        <button id="close-camera" type="button" aria-label="Fechar">Ã—</button>
      </div>
      <div class="camera-hint">Centralize o cÃ³digo dentro da Ã¡rea de vÃ­deo.</div>
      <video id="camera-video" playsinline></video>
      <div class="camera-status" id="camera-status">Iniciando cÃ¢mera...</div>
    </div>
  </div>
  <script type="module" src="./js/main.js"></script>
</body>
</html>