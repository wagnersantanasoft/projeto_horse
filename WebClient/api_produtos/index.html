<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>Gestão de Validades</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/png" href="./img/icon-s.png" />
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <header class="mobile-header" id="mobile-header">
    <div style="display:flex; align-items:center; gap:8px; padding: 0 0.6rem;">
      <button id="open-drawer" class="icon-btn hdr-btn only-mobile" aria-label="Filtros" title="Filtros">
        <img src="./img/icon-s.png" alt="Abrir menu" style="width: 28px; height: 28px; display: block;" />
      </button>
    </div>
  </header>
  <!-- Drawer / Menu Lateral de Filtros -->
  <aside id="filter-drawer" class="filter-drawer" aria-hidden="true">
    <div class="drawer-header">
      <h2>Filtros & Preferências</h2>
      <button id="close-drawer" type="button" aria-label="Fechar filtros">×</button>
    </div>
    <div class="drawer-content" role="form">
      <div class="drawer-group">
        <label for="status-filter">Status</label>
        <select id="status-filter">
          <option value="">Todos</option>
          <option value="OK">OK</option>
          <option value="ALERTA">Próximo de vencer</option>
          <option value="VENCIDO">Vencidos</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="filter-grupo">Grupo</label>
        <select id="filter-grupo">
          <option value="">Todos</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="filter-marca">Marca</label>
        <select id="filter-marca">
          <option value="">Todas</option>
        </select>
      </div>
      <div class="drawer-group">
        <label for="group-by">Agrupar por</label>
        <select id="group-by">
          <option value="">Nenhum</option>
          <option value="GP_DESCRI">Grupo</option>
          <option value="MAR_DESCRI">Marca</option>
        </select>
      </div>
       
      <!-- CONTROLE DE TAMANHO DE FONTE -->
      <div class="drawer-group">
        <label for="custom-date-start">Validade de</label>
        <input type="date" id="custom-date-start" />
        <label for="custom-date-end">até</label>
        <input type="date" id="custom-date-end" />
      </div>
      <div class="drawer-legend">
        <span class="badge status-ok">OK</span>
        <span class="badge status-alerta">Próx. vencer</span>
        <span class="badge status-vencido">Vencido</span>
      </div>
      <div class="drawer-group">
        <div style="display: flex; align-items: center; gap: 16px;">
          <label for="estoque-positivo" style="margin-right: 10px;">Positivo</label>
          <label class="switch">
            <input type="checkbox" id="estoque-positivo" />
            <span class="slider"></span>
          </label>
          <label for="tema" style="margin-right: 10px;">Tema</label>
          <button id="theme-toggle" type="button" class="icon-btn" aria-label="Alternar tema" title="Alternar tema">🌙</button>
        </div>
        
      </div>
      <div class="drawer-group">
        <label for="progress-bar">Tamanho da fonte</label>
        <div id="progress-bar-container" style="width: 100%; background: #eee; border-radius: 8px; height: 24px; margin-top: 6px;">
          <div id="progress-bar" style="width: 50%; height: 100%; background: linear-gradient(90deg, #4caf50, #2196f3); border-radius: 8px; transition: width 0.3s;"></div>
        </div>
        <span id="progress-value" style="display: block; text-align: right; font-size: 0.95em; margin-top: 2px; color: #333;">2'0%</span>
      </div>
      <div class="drawer-group" style="margin-bottom: 0;">
        <button id="apply-filters" type="button" class="drawer-apply">Aplicar</button>
      </div>
    </div>
  </aside>
  <div id="drawer-backdrop" class="drawer-backdrop" hidden></div>

  <!-- MOBILE CONTROLS: topo da tela (só aparecem em smartphone) -->

  <!-- Cabeçalho fixo (topo em desktop/tablet, rodapé em smartphone) -->
  <header class="app-header" id="main-header">
  <div style="position: relative; width: 100%; min-height: 48px;">
    <button id="open-drawer-desktop" class="icon-btn hdr-btn only-desktop" aria-label="Filtros" title="Filtros" style="position: absolute; left: 0; top: 50%; transform: translateY(-50%);">
      <img src="./img/icon-s.png" alt="Abrir menu" style="width: 28px; height: 28px; display: block;" />
    </button>
    <div class="search-box header-search" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 100%; max-width: 420px;">
      <input id="search" type="search" placeholder="Buscar (código, nome, marca...)" autocomplete="off" aria-label="Buscar produtos" />
      <button id="btn-voice" type="button" class="icon-btn" aria-label="Busca por voz" title="Busca por voz">🎤</button>
      <button id="btn-camera" type="button" class="icon-btn" aria-label="Ler código de barras" title="Ler código de barras">📷</button>
      <button id="clear-search" type="button" class="icon-btn" aria-label="Limpar busca" title="Limpar busca">×</button>
    </div>
  </div>
  </header>

  <main class="main-content">
    <div id="feedback" class="feedback sticky-feedback" aria-live="polite"></div>
    <div class="table-wrapper" id="table-wrapper">
      <table id="product-table">
        <thead>
          <tr>
            <th data-sort-field="PRO_CODIGO">Cód.</th>
            <th data-sort-field="PRO_COD_BARRA">Cód. Barra</th>
            <th data-sort-field="PRO_NOME">Nome</th>
            <th data-sort-field="UND_NOME">Unid</th>
            <th data-sort-field="PRO_ESTOQ1">Estoque</th>
            <th data-sort-field="PRO_PRECO1">Preço 1</th>
            <th data-sort-field="PRO_PRECO2">Preço 2</th>
            <th data-sort-field="PRO_VALIDADE">Validade</th>
            <th data-sort-field="_status">Status</th>
            <th data-sort-field="MAR_DESCRI">Marca</th>
            <th data-sort-field="GP_DESCRI">Grupo</th>
          </tr>
        </thead>
        <tbody id="product-tbody"></tbody>
      </table>
    </div>
    <div id="cards-container" class="cards-container" aria-live="polite"></div>
    <nav class="pagination" id="pagination" aria-label="Paginação"></nav>
  </main>
  <div id="camera-overlay" class="camera-overlay" hidden>
    <div class="camera-box">
      <div class="camera-header">
        <h3>Leitor de Código de Barras</h3>
        <button id="close-camera" type="button" aria-label="Fechar">×</button>
      </div>
      <div class="camera-hint">Centralize o código dentro da área de vídeo.</div>
      <video id="camera-video" playsinline></video>
      <div class="camera-status" id="camera-status">Iniciando câmera...</div>
    </div>
  </div>
  <script type="module" src="./js/main.js"></script>
</body>
</html>