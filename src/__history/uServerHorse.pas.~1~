unit uServerHorse;

interface

procedure StartServer;

implementation

uses
  Horse, Horse.CORS, System.SysUtils, uDM, uRouter;

procedure StartServer;
var
  Port: Integer;
begin
  DM := TDM.Create(nil);

  THorse.Use(CORS);

  // Router
  RegisterRoutes;

  Port := 9000; // poderia ler INI (exemplo simples)
  THorse.Listen(Port,
    procedure
    begin
      Writeln(Format('Servidor escutando na porta %d', [Port]));
    end);
end;

end.